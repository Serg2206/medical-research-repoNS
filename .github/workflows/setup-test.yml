name: ðŸ§  System Setup Test

on:
  workflow_dispatch:
  push:
    branches: [main]
    paths:
      - '.github/workflows/setup-test.yml'

jobs:
  setup-check:
    runs-on: ubuntu-latest
    steps:
      - name: âœ… Checkout code
        uses: actions/checkout@v4
      
      - name: ðŸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: ðŸ“¦ Install dependencies
        run: |
          pip install --upgrade pip
          echo "âœ… Python and pip ready"
      
      - name: ðŸ” Check repository structure
        run: |
          echo "ðŸ“ Repository structure:"
          ls -la
          echo ""
          echo "ðŸ“‚ Workflows:"
          ls -la .github/workflows/ || echo "No workflows yet"
      
      - name: ðŸ“Š System info
        run: |
          echo "=" | tr '\n' '=' | head -c 60; echo
          echo "SYSTEM INFORMATION"
          echo "=" | tr '\n' '=' | head -c 60; echo
          echo "Python: $(python --version)"
          echo "Pip: $(pip --version)"
          echo "OS: $(uname -a)"
          echo "Disk: $(df -h / | tail -1)"
          echo "Memory: $(free -h | grep Mem)"
      
      - name: ðŸŽ¯ Create summary
        run: |
          cat > SETUP_REPORT.md << 'EOF'
          # ðŸš€ Self-Learning System - Setup Report
          
          **Date:** $(date)
          **Status:** âœ… READY
          
          ## Checklist
          
          - âœ… GitHub Actions: Working
          - âœ… Python 3.11: Installed
          - âœ… Repository: Accessible
          - â³ OpenAI API Key: **Waiting for you to add**
          
          ## Next Steps
          
          ### 1. Add OpenAI API Key
          Go to: Settings â†’ Secrets â†’ Actions
          - Click "New repository secret"
          - Name: `OPENAI_API_KEY`
          - Value: Your OpenAI key (sk-proj-...)
          
          ### 2. Files to create
          After adding the key, I'll help you create:
          - ðŸ¤– AI Code Optimizer
          - ðŸ“Š ML Pattern Learning
          - â™»ï¸ Auto Refactoring
          - âš¡ Performance Monitor
          - ðŸ“š Research Analyzer
          - ðŸ“ Docs Improver
          
          ### 3. Ready to go!
          Once the key is added, the full AI system will activate automatically.
          
          ---
          
          **Current Status:** ðŸŸ¡ Waiting for OpenAI API Key
          **Time to complete:** 2 minutes
          EOF
          
          cat SETUP_REPORT.md
      
      - name: ðŸŽ‰ Success message
        run: |
          echo ""
          echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
          echo "â•‘                                                           â•‘"
          echo "â•‘  âœ… SETUP TEST SUCCESSFUL!                               â•‘"
          echo "â•‘                                                           â•‘"
          echo "â•‘  Your GitHub Actions environment is ready.               â•‘"
          echo "â•‘                                                           â•‘"
          echo "â•‘  ðŸ“‹ TODO: Add OPENAI_API_KEY to Secrets                 â•‘"
          echo "â•‘                                                           â•‘"
          echo "â•‘  Then you'll have:                                       â•‘"
          echo "â•‘  ðŸ¤– AI-powered code analysis                            â•‘"
          echo "â•‘  ðŸ“Š ML learning from your patterns                      â•‘"
          echo "â•‘  â™»ï¸  Automatic refactoring                              â•‘"
          echo "â•‘  âš¡ Performance optimization                            â•‘"
          echo "â•‘                                                           â•‘"
          echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo ""
